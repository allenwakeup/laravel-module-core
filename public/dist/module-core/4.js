(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"6hkw":function(t,e,i){"use strict";i("PHw2")},"HN/Y":function(t,e,i){var a=i("cshs");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(t.exports=a.locals)},PHw2:function(t,e,i){var a=i("Zxx6");"string"==typeof a&&(a=[[t.i,a,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i("aET+")(a,n);a.locals&&(t.exports=a.locals)},WJkJ:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},WKiH:function(t,e,i){var a=i("HYAF"),n=i("V37c"),r="["+i("WJkJ")+"]",s=RegExp("^"+r+r+"*"),o=RegExp(r+r+"*$"),c=function(t){return function(e){var i=n(a(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(o,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},Zxx6:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".payload-modal[data-v-6d80441a]{width:100%}",""])},apLa:function(t,e,i){"use strict";i("HN/Y")},cshs:function(t,e,i){(t.exports=i("I1BE")(!1)).push([t.i,".page_title[data-v-cf5ec19c]{font-size:14px;font-weight:700}.ant-list-item-meta-title.inactive[data-v-cf5ec19c]{color:#9c839f}.list_container[data-v-cf5ec19c]{border:1px solid #e8e8e8;border-radius:4px;overflow:auto;padding:0 5px 60px}.list_container.inactive[data-v-cf5ec19c]{background-color:#f9f9f9}.list-item[data-v-cf5ec19c]{padding:5px 7px;margin-bottom:0}.list-item .list-item-icon[data-v-cf5ec19c]{color:#d9ecff;font-size:20px}.list-item.active[data-v-cf5ec19c]{background-color:#547dc0;border-radius:5px;box-shadow:0 2px 12px 0 #cfcfcf}.list-item.active .ant-list-item-meta-title[data-v-cf5ec19c]{color:#d9ecff!important}.list-item.inactive .ant-list-item-meta-title[data-v-cf5ec19c]{color:#98939f}",""])},fQbI:function(t,e,i){"use strict";i.r(e);i("qePV"),i("rB9j"),i("UxlC"),i("ma9I"),i("pNMO"),i("4Brf"),i("07d7"),i("0oug"),i("4mDm"),i("PKPk"),i("3bBZ"),i("pjDv"),i("+2oP"),i("sMBO");function a(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var r={name:"AAssignment",components:{},props:{api:{type:String,required:!0,default:""},title:{type:String,default:""},actions:{type:Object},parameterReplacement:{type:String,default:""},leftParameter:{type:String,default:"id"},rightParameter:{type:String,default:"id"},width:{type:String,default:"40%"},height:{type:Number,default:420}},data:function(){return{select_list_item:void 0,search_left:"",loading:!0,loading_left:!0,loading_right:!1,data_left:[],data_right_source:[],data_right_target:[],data_right_selected:[]}},computed:{_api:function(){return this.api}},watch:{_api:function(t){this.onload()}},methods:{onload:function(){var t=this;this.isEmpty(this.api)||this.$get(this.api,{}).then((function(e){t.loading=!1,t.loading_left=!1,t.data_left=e.data.data})),this.loading=!0,this.loading_left=!0},onSearchLeft:function(t){this.search_left=t},showAssignment:function(t){var e=this;if(this.select_list_item!==t){if(this.select_list_item=t,this.data_right_selected=[],this.isEmpty(this.actions.source))return this.$message.error("API source 未定义");this.loading_right=!0,this.data_right_source=[],this.data_right_target=[],this.$get(this.isEmpty(this.parameterReplacement)?this.actions.source+"/"+t:this.actions.source.replace(this.parameterReplacement,t)).then((function(i){if(e.data_right_source=i.data,e.isEmpty(e.actions.target))return e.$message.error("API target 未定义");e.$get(e.isEmpty(e.parameterReplacement)?e.actions.target+"/"+t:e.actions.target.replace(e.parameterReplacement,t)).then((function(t){e.loading_right=!1,e.data_right_target=t.data}))}))}},handleChange:function(t,e,i){var a=this;if(!this.isEmpty(this.actions[e])){var n=this.isEmpty(this.parameterReplacement)?this.actions[e]+"/"+this.select_list_item:this.actions[e].replace(this.parameterReplacement,this.select_list_item),r={},s=this.data_right_target.concat([]);switch(r[this[e+"Parameter"]]=i,e){case"right":this.data_right_target=s.concat(i),this.$post(n,r).then((function(t){if(200!=t.code&&201!=t.code)return a.data_right_target=s,a.$message.error(t.msg);a.data_right_selected=i,a.$message.success(t.msg)})).catch((function(){a.data_right_target=s}));break;case"left":var o=i.reduce((function(t,e){return t["_"+e]=!0,t}),{});this.data_right_target=s.reduce((function(t,e){return o["_"+e]||t.push(e),t}),[]),this.$delete(n,r).then((function(t){if(200!=t.code&&204!=t.code)return a.data_right_target=s,a.$message.error(t.msg);a.data_right_selected=i,a.$message.success(t.msg)})).catch((function(){a.data_right_target=s}))}}},handleSelectChange:function(t,e){this.data_right_selected=[].concat(a(t),a(e))},isEmpty:function(t){return null==t||""===t||0===t.length}},created:function(){},mounted:function(){}},s=(i("apLa"),i("KHd+")),o={components:{AAssignment:Object(s.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"page_title"},[t._v(t._s(t.title))]),t._v(" "),i("div",{staticClass:"unline underm"}),t._v(" "),i("div",{staticClass:"page_body"},[i("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),i("a-row",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],style:{height:t.height+"px"},attrs:{gutter:8}},[i("a-col",{attrs:{span:8}},[i("div",[i("a-input-search",{attrs:{size:"large",placeholder:"搜索"},on:{search:t.onSearchLeft}})],1),t._v(" "),i("div",{staticClass:"list_container",class:{inactive:t.loading_right},style:{height:t.height-40+"px"}},[i("a-list",{staticClass:"list",attrs:{size:"small",loading:t.loading_left,"item-layout":"horizontal","data-source":t.data_left},scopedSlots:t._u([{key:"renderItem",fn:function(e,a){return i("a-list-item",{staticClass:"list-item",class:{active:t.select_list_item===e.value,inactive:t.loading_right},on:{click:function(i){return t.showAssignment(e.value)}}},[i("a-list-item-meta",[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]),t._v(" "),i("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.select_list_item===e.value,expression:"select_list_item === item.value"}],staticClass:"list-item-icon",attrs:{type:"check"}})],1)}}])})],1)]),t._v(" "),i("a-col",{attrs:{span:16}},[i("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.loading_right,expression:"loading_right"}]}),t._v(" "),i("a-transfer",{attrs:{titles:["未分配","已分配"],operations:["分配","取消"],"show-search":"",showSelectAll:"","list-style":{width:t.width,height:t.height+"px"},"data-source":t.data_right_source,"target-keys":t.data_right_target,"selected-keys":t.data_right_selected,render:function(t){return t.title}},on:{change:t.handleChange,selectChange:t.handleSelectChange}},[i("span",{attrs:{slot:"notFoundContent"},slot:"notFoundContent"},[t._v("\n                      没数据\n                    ")])])],1)],1)],1)])}),[],!1,null,"cf5ec19c",null).exports},props:{assignmentId:{type:Number,default:-1}},data:function(){return{id:0,info:{}}},watch:{_assignmentId:function(t){t>0&&this.onload()}},computed:{_assignmentId:function(){return this.assignmentId}},methods:{get_form:function(){var t=this;this.$get(this.$api.moduleCoreDataMaps+"_"+this.id+"/"+this.id+"/assignment").then((function(e){t.info=e.data}))},onload:function(){this.$isEmpty(this.$route.params.id)?this.assignmentId>0&&this.id!==this.assignmentId&&(this.id=this.assignmentId,this.get_form()):(this.id=this.$route.params.id,this.get_form())}},created:function(){this.onload()},mounted:function(){}},c=(i("6hkw"),Object(s.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("a-assignment",{attrs:{title:this.info.title,api:this.info.api,actions:this.info.actions,"parameter-replacement":":left_id"}})}),[],!1,null,"6d80441a",null));e.default=c.exports},qePV:function(t,e,i){"use strict";var a=i("g6v/"),n=i("2oRo"),r=i("lMq5"),s=i("busE"),o=i("UTVS"),c=i("xrYK"),l=i("cVYH"),h=i("2bX/"),d=i("wE6v"),u=i("0Dky"),f=i("fHMY"),g=i("JBy8").f,m=i("Bs8V").f,p=i("m/L8").f,_=i("WKiH").trim,v=n.Number,y=v.prototype,w="Number"==c(f(y)),b=function(t){if(h(t))throw TypeError("Cannot convert a Symbol value to a number");var e,i,a,n,r,s,o,c,l=d(t,"number");if("string"==typeof l&&l.length>2)if(43===(e=(l=_(l)).charCodeAt(0))||45===e){if(88===(i=l.charCodeAt(2))||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(s=(r=l.slice(2)).length,o=0;o<s;o++)if((c=r.charCodeAt(o))<48||c>n)return NaN;return parseInt(r,a)}return+l};if(r("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var I,x=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof x&&(w?u((function(){y.valueOf.call(i)})):"Number"!=c(i))?l(new v(b(e)),i,x):b(e)},E=a?g(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),N=0;E.length>N;N++)o(v,I=E[N])&&!o(x,I)&&p(x,I,m(v,I));x.prototype=y,y.constructor=x,s(n,"Number",x)}}}]);
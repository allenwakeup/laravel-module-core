(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{yTyi:function(t,e,a){"use strict";a.r(e);var n=a("FAbG"),i=a("fQbI"),s={mixins:[a("K49p").a],components:{AAssignment:i.default,Search:n.a},props:{},data:function(){return{table:{actions:{list:this.$api.adminDataMaps,remove:this.$api.adminDataMaps},columns:[{title:"#",dataIndex:"id",fixed:"left",width:80},{title:"数据路径",scopedSlots:{customRender:"data_route_id"},width:220},{title:"左表",scopedSlots:{customRender:"left"},width:220},{title:"左表模板",dataIndex:"left_tpl",width:180},{title:"右表",scopedSlots:{customRender:"right"},width:220},{title:"右表模板",dataIndex:"right_tpl",width:180},{title:"关联关系",dataIndex:"relationshipText",width:180},{title:"Foreign Pivot Key",dataIndex:"foreign_pivot_key",width:200},{title:"Related Pivot Key",dataIndex:"related_pivot_key",width:200},{title:"Parent Key",dataIndex:"parent_key",width:200},{title:"Related Key",dataIndex:"related_key",width:200},{title:"多态前缀",dataIndex:"name",width:180},{title:"描述",dataIndex:"description",width:150},{title:"存储位置",dataIndex:"table",width:180},{title:"状态",dataIndex:"status",width:90},{title:"创建时间",dataIndex:"created_at",width:200},{title:"更新时间",dataIndex:"updated_at",width:200},{title:"操作",fixed:"right",scopedSlots:{customRender:"action"}}]},search:{fields:[{label:"左表",name:"left_table",type:"text"},{label:"右表",name:"right_table",type:"text"}]},selectedAssignment:{},openAssignmentModal:!1}},watch:{},computed:{},methods:{onload:function(){this.loadTableData()},handleAssignment:function(t){this.selectedAssignment=t,this.openAssignmentModal=!0}},created:function(){this.onload()},mounted:function(){}},l=a("KHd+"),d=Object(l.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"admin_table_page_title"},[t._v("数据映射列表")]),t._v(" "),a("div",{staticClass:"unline underm"}),t._v(" "),a("div",{staticClass:"admin_table_list"},[a("a-table",{attrs:{size:"small",columns:t.table.columns,"data-source":t.table.data,scroll:{y:t.sysWindowHeight-400},loading:t.table.loading,pagination:!1,"row-selection":{selectedRowKeys:t.table.selectedRowKeys,onChange:t.handleTableRowKeysChange},"row-key":"id"},scopedSlots:t._u([{key:"title",fn:function(e){return[a("search",{attrs:{"search-config":t.search.fields,"auto-params":t.search.params,"export-config":t.exporting},on:{searchParams:t.handleTableSearchParams,handleExport:t.handleTableExport}}),t._v(" "),a("div",{staticClass:"admin_table_handle_btn"},[a("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.$router.push("/Admin/goodcatch/m/core/data_maps/form")}}},[t._v("添加")]),t._v(" "),a("a-button",{staticClass:"admin_delete_btn",attrs:{type:"danger",icon:"delete"},on:{click:t.handleRemoveTableRows}},[t._v("批量删除")])],1)]}},{key:"data_route_id",fn:function(e){return a("span",{},[t._v("\n                "+t._s(e.dataRoute?e.dataRoute.name:e.data_route_id)+"\n            ")])}},{key:"left",fn:function(e){return a("span",{},[t._v("\n                "+t._s(e.left+e.left_table)+"\n            ")])}},{key:"right",fn:function(e){return a("span",{},[t._v("\n                "+t._s(e.right+e.right_table)+"\n            ")])}},{key:"action",fn:function(e,n){return a("span",{},[a("a-button",{attrs:{icon:"edit"},on:{click:function(a){return t.$router.push("/Admin/goodcatch/m/core/data_maps/form/"+e.id)}}},[t._v("编辑")]),t._v(" "),a("a-button",{attrs:{icon:"interaction"},on:{click:function(e){return t.handleAssignment(n)}}},[t._v("分配")])],1)}}])}),t._v(" "),t.table.total>0?a("div",{staticClass:"admin_pagination"},[a("a-pagination",{attrs:{"page-size":t.table.params.per_page,total:t.table.total,"show-less-items":""},on:{"update:pageSize":function(e){return t.$set(t.table.params,"per_page",e)},"update:page-size":function(e){return t.$set(t.table.params,"per_page",e)},change:t.handleTablePageChange},model:{value:t.table.params.page,callback:function(e){t.$set(t.table.params,"page",e)},expression:"table.params.page"}})],1):t._e()],1),t._v(" "),a("a-modal",{attrs:{title:"数据映射","body-style":{overflow:"scroll",height:"500px"},"dialog-style":{top:"20px"},width:"80%",height:"600px"},model:{value:t.openAssignmentModal,callback:function(e){t.openAssignmentModal=e},expression:"openAssignmentModal"}},[a("template",{slot:"footer"},[a("span")]),t._v(" "),a("a-assignment",{key:t.selectedAssignment.id,attrs:{"assignment-id":t.selectedAssignment.id}})],2)],1)}),[],!1,null,"5f237d52",null);e.default=d.exports}}]);
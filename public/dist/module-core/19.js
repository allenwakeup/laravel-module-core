(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{IhBc:function(t,e,r){"use strict";r.r(e);r("sMBO"),r("pNMO"),r("4Brf"),r("07d7"),r("0oug"),r("4mDm"),r("PKPk"),r("3bBZ"),r("pjDv"),r("+2oP");function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var n={components:{},props:{},data:function(){return{cascader_department:[],form:{pid:0,code:"",name:"",short:"",alias:"",description:"",order:1,status:1},rules:{code:[{min:1,max:20,message:"1到20个字符",trigger:"blur"}],name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:10,message:"至少两个字",trigger:"blur"}]},departments:[],id:0}},watch:{},computed:{},methods:{handleSubmit:function(){var t=this;if(this.$isEmpty(this.form.code))return this.$message.error("编码不能为空");if(this.$isEmpty(this.form.name))return this.$message.error("名称不能为空");var e=this.$apiHandle(this.$api.moduleCoreDepartments,this.id);e.status?this.$put(e.url,this.form).then((function(e){return 200===e.code?(t.$message.success(e.msg),t.$router.back()):t.$message.error(e.msg)})):this.$post(e.url,this.form).then((function(e){return 200===e.code||201===e.code?(t.$message.success(e.msg),t.$router.back()):t.$message.error(e.msg)}))},get_form:function(){var t=this;this.$get(this.$api.moduleCoreDepartments+"/"+this.id).then((function(e){t.form=e.data}))},onChangeOrder:function(t){this.form.order=t},onChangeStatus:function(t){this.form.status=t?1:0},department_change:function(t,e){this.form.pid=t[t.length-1],0===t.length&&(this.form.pid=0)},load_departments:function(t){var e=this,r=t[t.length-1];r.loading=!0;var o={pid:r.id,data_type:"select"};this.$get(this.$api.moduleCoreDepartments,o).then((function(t){r.loading=!1,r.children=t.data,e.departments=a(e.departments)}))},onload:function(){var t=this;this.$isEmpty(this.$route.params.id)||(this.id=this.$route.params.id,this.get_form()),this.$get(this.$api.moduleCoreDepartments,{data_type:"select"}).then((function(e){200===e.code&&(t.departments=e.data)}))}},created:function(){this.onload()},mounted:function(){}},s=r("KHd+"),i=Object(s.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"admin_table_page_title"},[r("a-button",{staticClass:"float_right",attrs:{icon:"arrow-left"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")]),t._v("\n        部门编辑\n    ")],1),t._v(" "),r("div",{staticClass:"unline underm"}),t._v(" "),r("div",{staticClass:"admin_form"},[r("a-form-model",{attrs:{model:t.form,rules:t.rules,"label-col":{span:6},"wrapper-col":{span:16}}},[r("a-form-model-item",{attrs:{label:"上级部门"}},[r("a-cascader",{attrs:{"load-data":t.load_departments,options:t.departments,fieldNames:{label:"name",value:"id",children:"children"},placeholder:t.form.pid>0&&t.form.path_text?t.form.path_text.join(" / "):"请选择上级部门","change-on-select":""},on:{change:t.department_change}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"编码"}},[r("a-input",{model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[r("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"简称"}},[r("a-input",{model:{value:t.form.short,callback:function(e){t.$set(t.form,"short",e)},expression:"form.short"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"别名"}},[r("a-input",{model:{value:t.form.alias,callback:function(e){t.$set(t.form,"alias",e)},expression:"form.alias"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"描述"}},[r("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"排序",prop:"order"}},[r("a-input-number",{attrs:{min:0},on:{change:t.onChangeOrder},model:{value:t.form.order,callback:function(e){t.$set(t.form,"order",e)},expression:"form.order"}})],1),t._v(" "),r("a-form-model-item",{attrs:{label:"状态"}},[r("a-switch",{attrs:{"checked-children":"启用","un-checked-children":"禁用",checked:1===t.form.status},on:{change:t.onChangeStatus}})],1),t._v(" "),r("a-form-model-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[r("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)])}),[],!1,null,"833e6a8c",null);e.default=i.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"7e5n":function(t,e,a){var i=a("Rm9Z");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},Rm9Z:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".payload-modal[data-v-1a2e8d7b]{width:100%}",""])},"byW/":function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".page_title[data-v-20d6e6e4]{font-size:14px;font-weight:700}.ant-list-item-meta-title.inactive[data-v-20d6e6e4]{color:#9c839f}.list_container[data-v-20d6e6e4]{border:1px solid #e8e8e8;border-radius:4px;overflow:auto;padding:0 5px 60px}.list_container.inactive[data-v-20d6e6e4]{background-color:#f9f9f9}.list-item[data-v-20d6e6e4]{padding:5px 7px;margin-bottom:0}.list-item .list-item-icon[data-v-20d6e6e4]{color:#d9ecff;font-size:20px}.list-item.active[data-v-20d6e6e4]{background-color:#547dc0;border-radius:5px;box-shadow:0 2px 12px 0 #cfcfcf}.list-item.active .ant-list-item-meta-title[data-v-20d6e6e4]{color:#d9ecff!important}.list-item.inactive .ant-list-item-meta-title[data-v-20d6e6e4]{color:#98939f}",""])},egba:function(t,e,a){"use strict";a("7e5n")},fQbI:function(t,e,a){"use strict";a.r(e);a("qePV"),a("rB9j"),a("UxlC"),a("ma9I"),a("pNMO"),a("4Brf"),a("07d7"),a("0oug"),a("4mDm"),a("PKPk"),a("3bBZ"),a("pjDv"),a("+2oP"),a("sMBO");function i(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var n={name:"AAssignment",components:{},props:{api:{type:String,required:!0,default:""},title:{type:String,default:""},actions:{type:Object},parameterReplacement:{type:String,default:""},leftParameter:{type:String,default:"id"},rightParameter:{type:String,default:"id"},width:{type:String,default:"40%"},height:{type:Number,default:420}},data:function(){return{select_list_item:void 0,search_left:"",loading:!0,loading_left:!0,loading_right:!1,data_left:[],data_right_source:[],data_right_target:[],data_right_selected:[]}},computed:{},watch:{},methods:{onload:function(){var t=this;this.isEmpty(this.api)||this.$get(this.api,{}).then((function(e){200===e.code&&(t.loading=!1,t.loading_left=!1,t.data_left=e.data.data)})),this.loading=!0,this.loading_left=!0},onSearchLeft:function(t){this.search_left=t},showAssignment:function(t){var e=this;if(this.select_list_item!==t){if(this.select_list_item=t,this.data_right_selected=[],this.isEmpty(this.actions.source))return this.$message.error("API source 未定义");this.loading_right=!0,this.data_right_source=[],this.data_right_target=[],this.$get(this.isEmpty(this.parameterReplacement)?this.actions.source+"/"+t:this.actions.source.replace(this.parameterReplacement,t)).then((function(a){if(e.data_right_source=a.data,e.isEmpty(e.actions.target))return e.$message.error("API target 未定义");e.$get(e.isEmpty(e.parameterReplacement)?e.actions.target+"/"+t:e.actions.target.replace(e.parameterReplacement,t)).then((function(t){e.loading_right=!1,e.data_right_target=t.data}))}))}},handleChange:function(t,e,a){var i=this;if(!this.isEmpty(this.actions[e])){var s=this.isEmpty(this.parameterReplacement)?this.actions[e]+"/"+this.select_list_item:this.actions[e].replace(this.parameterReplacement,this.select_list_item),n={},r=this.data_right_target.concat([]);switch(n[this[e+"Parameter"]]=a,e){case"right":this.data_right_target=r.concat(a),this.$post(s,n).then((function(t){if(200!=t.code&&201!=t.code)return i.data_right_target=r,i.$message.error(t.msg);i.data_right_selected=a,i.$message.success(t.msg)})).catch((function(){i.data_right_target=r}));break;case"left":var o=a.reduce((function(t,e){return t["_"+e]=!0,t}),{});this.data_right_target=r.reduce((function(t,e){return o["_"+e]||t.push(e),t}),[]),this.$delete(s,n).then((function(t){if(200!=t.code&&204!=t.code)return i.data_right_target=r,i.$message.error(t.msg);i.data_right_selected=a,i.$message.success(t.msg)})).catch((function(){i.data_right_target=r}))}}},handleSelectChange:function(t,e){this.data_right_selected=[].concat(i(t),i(e))},isEmpty:function(t){return null==t||""===t||0===t.length}},created:function(){this.onload()},mounted:function(){}},r=(a("uhkC"),a("KHd+")),o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"page_title"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"unline underm"}),t._v(" "),a("div",{staticClass:"page_body"},[a("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}]}),t._v(" "),a("a-row",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],style:{height:t.height+"px"},attrs:{gutter:8}},[a("a-col",{attrs:{span:8}},[a("div",[a("a-input-search",{attrs:{size:"large",placeholder:"搜索"},on:{search:t.onSearchLeft}})],1),t._v(" "),a("div",{staticClass:"list_container",class:{inactive:t.loading_right},style:{height:t.height-40+"px"}},[a("a-list",{staticClass:"list",attrs:{size:"small",loading:t.loading_left,"item-layout":"horizontal","data-source":t.data_left},scopedSlots:t._u([{key:"renderItem",fn:function(e,i){return a("a-list-item",{staticClass:"list-item",class:{active:t.select_list_item===e.value,inactive:t.loading_right},on:{click:function(a){return t.showAssignment(e.value)}}},[a("a-list-item-meta",[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.title))])]),t._v(" "),a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.select_list_item===e.value,expression:"select_list_item === item.value"}],staticClass:"list-item-icon",attrs:{type:"check"}})],1)}}])})],1)]),t._v(" "),a("a-col",{attrs:{span:16}},[a("a-spin",{directives:[{name:"show",rawName:"v-show",value:t.loading_right,expression:"loading_right"}]}),t._v(" "),a("a-transfer",{attrs:{titles:["未分配","已分配"],operations:["分配","取消"],"show-search":"",showSelectAll:"","list-style":{width:t.width,height:t.height+"px"},"data-source":t.data_right_source,"target-keys":t.data_right_target,"selected-keys":t.data_right_selected,render:function(t){return t.title}},on:{change:t.handleChange,selectChange:t.handleSelectChange}},[a("span",{attrs:{slot:"notFoundContent"},slot:"notFoundContent"},[t._v("\n                      没数据\n                    ")])])],1)],1)],1)])}),[],!1,null,"20d6e6e4",null).exports,l=(a("zKZe"),a("hByQ"),a("TeQF"),a("yq1k"),a("JTJg"),a("2B1R"),a("zqxM")),c=a.n(l),d={components:{Search:a("FAbG").a},props:{titles:{type:Array},operations:{type:Array},search:{type:Object},left:{type:Object,required:!0},right:{type:Object,required:!0}},data:function(){return{loading:!1,data:[],targetKeys:[]}},methods:{onload:function(){this.left&&this.left.api&&this.loadLeftData(this.left.api),this.right&&this.right.api&&this.loadRightData(this.right.api)},loadLeftData:function(t){var e=this;this.$isEmpty(t)?this.$message.error("未定义数据源."):(this.left.loading=!0,this.$get(t,Object.assign({},this.search.params,this.left.params)).then((function(t){e.data=[],200===t.code?t.data&&(e.data=t.data):e.$message.error(t.msg),e.left.loading=!1}),(function(t){e.$message.error(t),e.left.loading=!1})))},loadRightData:function(t){var e=this;this.$isEmpty(t)?this.$message.error("未定义数据源."):(this.right.loading=!0,this.$get(t).then((function(t){e.targetKeys=[],200===t.code?t.data&&(e.targetKeys=t.data):e.$message.error(t.msg),e.right.loading=!1}),(function(t){e.$message.error(t),e.right.loading=!1})))},handleSearchParams:function(t){this.search&&(this.search.params=t),this.onload()},onChange:function(t,e,a){this.targetKeys=t,this.$emit("change",{targetKeys:t,direction:e,moveKeys:a,data:this.data.filter((function(t){return a.includes(t.key)}))})},getRowSelection:function(t){var e=t.disabled,a=t.selectedKeys,i=t.itemSelectAll,s=t.itemSelect;return{getCheckboxProps:function(t){return{props:{disabled:e||t.disabled}}},onSelectAll:function(t,e){var s=e.filter((function(t){return!t.disabled})).map((function(t){return t.key})),n=t?c()(s,a):c()(a,s);i(n,t)},onSelect:function(t,e){var a=t.key;s(a,e)},selectedRowKeys:a}}},created:function(){this.onload()},mounted:function(){}},h=(Object(r.a)(d,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.search?a("search",{attrs:{"search-config":t.search.fields,"auto-params":t.search.params},on:{searchParams:t.handleSearchParams}}):t._e(),t._v(" "),a("a-transfer",{attrs:{"data-source":t.data,"target-keys":t.targetKeys,titles:t.titles,"list-style":{maxHeight:"100%"},operations:t.operations,"show-search":"","filter-option":function(t,e){return-1!==e.title.indexOf(t)},"show-select-all":!1},on:{change:t.onChange},scopedSlots:t._u([{key:"children",fn:function(e){var i=e.props,s=i.direction,n=i.filteredItems,r=i.selectedKeys,o=i.disabled,l=e.on,c=l.itemSelectAll,d=l.itemSelect;return[a("a-table",{style:{pointerEvents:o?"none":null},attrs:{"row-selection":t.getRowSelection({disabled:o,selectedKeys:r,itemSelectAll:c,itemSelect:d}),columns:"left"===s?t.left.columns:t.right.columns,"data-source":n,loading:"left"===s?t.left.loading:t.right.loading,size:"small","custom-row":function(t){var e=t.key,a=t.disabled;return{on:{click:function(){a||o||d(e,!r.includes(e))}}}}}})]}}])},[t._v(" "),a("span",{attrs:{slot:"notFoundContent"},slot:"notFoundContent"},[t._v("\n          没有找到更多的数据\n        ")])])],1)}),[],!1,null,null,null).exports,{components:{AAssignment:o},props:{assignmentId:{type:Number,default:-1}},data:function(){return{id:0,info:{actions:{},api:"",title:""}}},watch:{},computed:{},methods:{get_form:function(){var t=this;this.$get(this.$api.moduleCoreDataMaps+"_"+this.id+"/"+this.id+"/assignment").then((function(e){200===e.code&&(t.info=e.data)}))},onload:function(){this.$isEmpty(this.$route.params.id)?this.assignmentId>0&&this.id!==this.assignmentId&&(this.id=this.assignmentId,this.get_form()):(this.id=this.$route.params.id,this.get_form())}},created:function(){this.onload()},mounted:function(){}}),u=(a("egba"),Object(r.a)(h,(function(){var t=this.$createElement;return(this._self._c||t)("a-assignment",{attrs:{title:this.info.title,api:this.info.api,actions:this.info.actions,"parameter-replacement":":left_id"}})}),[],!1,null,"1a2e8d7b",null));e.default=u.exports},uOqf:function(t,e,a){var i=a("byW/");"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(i,s);i.locals&&(t.exports=i.locals)},uhkC:function(t,e,a){"use strict";a("uOqf")}}]);
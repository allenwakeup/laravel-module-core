(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"28ro":function(t,e,o){"use strict";o("wv5a")},VjOR:function(t,e,o){"use strict";o.r(e);var a={components:{},props:{},data:function(){return{connections:[],from_tables:[],to_tables:[],form:{name:"",short:"",alias:"",from:"",table_from:"",to:"",table_to:"",output:"",connection_id:"",description:""},id:0,rules:{name:[{required:!0,message:"请填写名称"}],from:[{required:!0,message:"请填写首表的名称"}],table_from:[{required:!0,message:"请填写首表的数据库表名"}],to:[{required:!0,message:"请填写尾表的名称"}],table_to:[{required:!0,message:"请填写尾表的数据库表名"}],output:[{required:!0,message:"请填写目标表的数据库表名"}],connection_id:[{trigger:"change",required:!0,message:"请选择一个连接"}]}}},watch:{},computed:{},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message.error("请正确填写表单！"),!1;var o=t.$apiHandle(t.$api.moduleCoreDataRoutes,t.id);o.status?t.$put(o.url,t.form).then((function(e){return 200==e.code?(t.$message.success(e.msg),t.$router.back()):t.$message.error(e.msg)})):t.$post(o.url,t.form).then((function(e){return 200==e.code||201==e.code?(t.$message.success(e.msg),t.$router.back()):t.$message.error(e.msg)}))}))},handleConnectionSearch:function(t){this.getConnectionSelector({keyword:t})},handleConnectionChange:function(t){this.form.connection_id=t},handleTableFromSearch:function(t){this.getTableFromSelector({keyword:t})},handleTableFromChange:function(t){this.form.table_from=t},handleTableToSearch:function(t){this.getTableToSelector({keyword:t})},handleTableToChange:function(t){this.form.table_to=t},get_form:function(){var t=this;this.$get(this.$api.moduleCoreDataRoutes+"/"+this.id).then((function(e){t.form=e.data}))},getConnectionSelector:function(t){var e=this;this.$get(this.$api.moduleCoreConnections,t).then((function(t){t.data&&t.data.data&&(e.connections=t.data.data)}))},getTableFromSelector:function(t){var e=this;this.$get(this.$api.moduleCoreDatabases,t).then((function(t){t.data&&t.data.data&&(e.from_tables=t.data.data)}))},getTableToSelector:function(t){var e=this;this.$get(this.$api.moduleCoreDatabases,t).then((function(t){t.data&&t.data.data&&(e.to_tables=t.data.data)}))},onload:function(){this.$isEmpty(this.$route.params.id)||(this.id=this.$route.params.id,this.get_form()),this.getConnectionSelector(),this.getTableFromSelector(),this.getTableToSelector()}},created:function(){this.onload()},mounted:function(){}},r=(o("28ro"),o("KHd+")),n=Object(r.a)(a,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"admin_table_page_title"},[o("a-button",{staticClass:"float_right",attrs:{icon:"arrow-left"},on:{click:function(e){return t.$router.back()}}},[t._v("返回")]),t._v("\n        数据路径编辑\n    ")],1),t._v(" "),o("div",{staticClass:"unline underm"}),t._v(" "),o("div",{staticClass:"admin_form"},[o("a-form-model",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-col":{span:5},"wrapper-col":{span:12}}},[o("a-form-model-item",{attrs:{label:"名称",prop:"name"}},[o("a-input",{attrs:{placeholder:"请输入路径名称"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"数据路径的全称，尽可能保持路径的完整名称，通常夸一个模型进行路径定义。例如用户与客户的路径，可以是用户直接到客户，同时也可以是用户先到部门，部门再到客户。"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"简称",prop:"short"}},[o("a-input",{attrs:{placeholder:"请输入路径简称"},model:{value:t.form.short,callback:function(e){t.$set(t.form,"short",e)},expression:"form.short"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"数据路径的简称，用于简单显示"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"别名",prop:"alias"}},[o("a-input",{attrs:{placeholder:"请输入路径别名"},model:{value:t.form.alias,callback:function(e){t.$set(t.form,"alias",e)},expression:"form.alias"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"数据路径的别名，通常是通俗一点的名称，例如别名会用作菜单的分组名称。"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"首表名称",prop:"from"}},[o("a-input",{attrs:{placeholder:"请输入首表名称"},model:{value:t.form.from,callback:function(e){t.$set(t.form,"from",e)},expression:"form.from"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"首部表的名称表示路径的起始名称。"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"首表表名",prop:"table_from"}},[o("a-select",{attrs:{"show-search":"",placeholder:"选择首部表",value:t.form.table_from,model:t.form.table_from,"filter-option":!1,"not-found-content":"没有更多的表"},on:{search:t.handleTableFromSearch,change:t.handleTableFromChange}},t._l(t.from_tables,(function(e){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"尾表名称",prop:"to"}},[o("a-input",{attrs:{placeholder:"请输入尾表名称"},model:{value:t.form.to,callback:function(e){t.$set(t.form,"to",e)},expression:"form.to"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"尾部表的名称表示路径的结束名称。"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"尾表表名",prop:"table_to"}},[o("a-select",{attrs:{"show-search":"",placeholder:"选择尾部表",value:t.form.table_to,model:t.form.table_to,"filter-option":!1,"not-found-content":"没有更多的表"},on:{search:t.handleTableToSearch,change:t.handleTableToChange}},t._l(t.to_tables,(function(e){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"目标表名",prop:"output"}},[o("a-input",{attrs:{placeholder:"请输入数据库完整表名。注：表名一旦设置，均不可修改，请谨慎处理。"},model:{value:t.form.output,callback:function(e){t.$set(t.form,"output",e)},expression:"form.output"}},[o("a-tooltip",{attrs:{slot:"suffix",title:"目标表的表名将自动加入表前缀「sync_」。表名一旦设置，均不可修改，请谨慎处理。"},slot:"suffix"},[o("a-icon",{attrs:{type:"info-circle"}})],1)],1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"使用数据库连接",prop:"connection_id"}},[o("a-select",{attrs:{"show-search":"",placeholder:"选择连接",value:t.form.connection_id,model:t.form.connection_id,"filter-option":!1,"not-found-content":"没有更多的连接"},on:{search:t.handleConnectionSearch,change:t.handleConnectionChange}},t._l(t.connections,(function(e){return o("a-select-option",{key:e.id,attrs:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),1)],1),t._v(" "),o("a-form-model-item",{attrs:{label:"描述",prop:"description"}},[o("a-textarea",{attrs:{placeholder:"请输入描述信息。","auto-size":{minRows:3,maxRows:5}},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),t._v(" "),o("a-form-model-item",{attrs:{"wrapper-col":{span:12,offset:5}}},[o("a-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")])],1)],1)],1)])}),[],!1,null,"642f96f6",null);e.default=n.exports},"W/+S":function(t,e,o){(t.exports=o("I1BE")(!1)).push([t.i,".payload-modal[data-v-642f96f6]{width:100%}",""])},wv5a:function(t,e,o){var a=o("W/+S");"string"==typeof a&&(a=[[t.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};o("aET+")(a,r);a.locals&&(t.exports=a.locals)}}]);